<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="470px" preserveAspectRatio="none" style="width:509px;height:470px;background:#FFFFFF;" version="1.1" viewBox="0 0 509 470" width="509px" zoomAndPan="magnify"><defs/><g><ellipse cx="262.0215" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="331.4902" x="96.2764" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="311.4902" x="106.2764" y="71.1387">Extract template, data, and map from request body</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="235.7715" x="144.1357" y="103.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="215.7715" x="154.1357" y="125.1074">Validate inputs using validateInputs</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="249.8398" x="137.1016" y="157.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="229.8398" x="147.1016" y="179.0762">Decode the template using he.decode</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="314.123" x="104.96" y="211.9063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="294.123" x="114.96" y="233.0449">Process loops in the template using handleLoops</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="428.334" x="47.8545" y="265.875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="408.334" x="57.8545" y="287.0137">Replace variables in the processed template using replaceVariables</text><polygon fill="#F1F1F1" points="233.4768,319.8438,290.5662,319.8438,302.5662,331.8438,290.5662,343.8438,233.4768,343.8438,221.4768,331.8438,233.4768,319.8438" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="57.0894" x="233.4768" y="335.6519">No errors?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19.0083" x="202.4685" y="329.2495">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.7017" x="302.5662" y="329.2495">no</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="248.4512" x="11" y="353.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="228.4512" x="21" y="374.9824">Return 200 status with the final result</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="218.7324" x="279.4512" y="353.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="198.7324" x="289.4512" y="374.9824">Return error status and message</text><polygon fill="#F1F1F1" points="262.0215,393.8125,274.0215,405.8125,262.0215,417.8125,250.0215,405.8125,262.0215,393.8125" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="262.0215" cy="448.8125" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="262.0215" cy="448.8125" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="262.0215" x2="262.0215" y1="30" y2="50"/><polygon fill="#181818" points="258.0215,40,262.0215,50,266.0215,40,262.0215,44" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="262.0215" x2="262.0215" y1="83.9688" y2="103.9688"/><polygon fill="#181818" points="258.0215,93.9688,262.0215,103.9688,266.0215,93.9688,262.0215,97.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="262.0215" x2="262.0215" y1="137.9375" y2="157.9375"/><polygon fill="#181818" points="258.0215,147.9375,262.0215,157.9375,266.0215,147.9375,262.0215,151.9375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="262.0215" x2="262.0215" y1="191.9063" y2="211.9063"/><polygon fill="#181818" points="258.0215,201.9063,262.0215,211.9063,266.0215,201.9063,262.0215,205.9063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="262.0215" x2="262.0215" y1="245.875" y2="265.875"/><polygon fill="#181818" points="258.0215,255.875,262.0215,265.875,266.0215,255.875,262.0215,259.875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="221.4768" x2="135.2256" y1="331.8438" y2="331.8438"/><line style="stroke:#181818;stroke-width:1;" x1="135.2256" x2="135.2256" y1="331.8438" y2="353.8438"/><polygon fill="#181818" points="131.2256,343.8438,135.2256,353.8438,139.2256,343.8438,135.2256,347.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="302.5662" x2="388.8174" y1="331.8438" y2="331.8438"/><line style="stroke:#181818;stroke-width:1;" x1="388.8174" x2="388.8174" y1="331.8438" y2="353.8438"/><polygon fill="#181818" points="384.8174,343.8438,388.8174,353.8438,392.8174,343.8438,388.8174,347.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="135.2256" x2="135.2256" y1="387.8125" y2="405.8125"/><line style="stroke:#181818;stroke-width:1;" x1="135.2256" x2="250.0215" y1="405.8125" y2="405.8125"/><polygon fill="#181818" points="240.0215,401.8125,250.0215,405.8125,240.0215,409.8125,244.0215,405.8125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="388.8174" x2="388.8174" y1="387.8125" y2="405.8125"/><line style="stroke:#181818;stroke-width:1;" x1="388.8174" x2="274.0215" y1="405.8125" y2="405.8125"/><polygon fill="#181818" points="284.0215,401.8125,274.0215,405.8125,284.0215,409.8125,280.0215,405.8125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="262.0215" x2="262.0215" y1="299.8438" y2="319.8438"/><polygon fill="#181818" points="258.0215,309.8438,262.0215,319.8438,266.0215,309.8438,262.0215,313.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="262.0215" x2="262.0215" y1="417.8125" y2="437.8125"/><polygon fill="#181818" points="258.0215,427.8125,262.0215,437.8125,266.0215,427.8125,262.0215,431.8125" style="stroke:#181818;stroke-width:1;"/><!--SRC=[RP0zJmCn38Rt_0gFLwb25MDlO8412I74qDsz-7gHSd6m7Q3_7lVw8OHOxUTvNoTgA1R2zkdR10S3exbcD5f3HCCrO8amOuLHU0QXZqPgiETuxCDsXpavHP1ARQRGD9K3V5wcpylGiKSQE1BOHBVq2phHNLoMJhq93wGAcRcg9_xB-pMPNaw46-_aku6yK1BkCzsiUewY-DUNix6x2dq8QOJkbO54MFHXTV8BT4VILG3m2cjIu7wp0JMqfl2LR5fAnbGmUwAsR7sWh0HTuT_Maddrbd_qe_3WZwKIqnY26jSV]--></g></svg>